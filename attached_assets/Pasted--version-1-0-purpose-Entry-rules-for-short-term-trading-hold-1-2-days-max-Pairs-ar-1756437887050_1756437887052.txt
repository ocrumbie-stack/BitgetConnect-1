{
  "version": "1.0",
  "purpose": "Entry rules for short-term trading (hold 1–2 days max). Pairs are already bucketed via screener.config.json.",
  "htf_bias": {
    "enabled": true,
    "rule": "Only take LONGS if close > EMA200 on 1D; only take SHORTS if close < EMA200 on 1D.",
    "note": "Optional safety filter; set enabled=false to ignore."
  },
  "entries": [
    {
      "bucket": "Balanced",
      "timeframes": { "signal_tf": "1h", "trigger_tf": "15m" },
      "long": {
        "all_of": [
          "close(signal_tf) >= EMA(close(signal_tf), 100)",                              
          "MACD(signal_tf,12,26,9).line > MACD(signal_tf,12,26,9).signal OR RSI(signal_tf,14) <= 35"
        ],
        "confirmation": [
          "close(trigger_tf) > prev_resistance(trigger_tf)",                             
          "volume(trigger_tf) >= 1.5 * SMA(volume(trigger_tf), 20)"
        ],
        "entry": "Market/limit at trigger_tf close when confirmation holds.",
        "risk": {
          "stop": "Below last swing-low on 15m (or 1.2 * ATR(trigger_tf,14) below entry).",
          "tp": "At 1.5–2.0R or next 1h resistance; trail if MACD turns down on 1h."
        },
        "invalidations": [
          "close(signal_tf) < EMA100_1h",
          "MACD crosses down on 1h after entry",
          "RSI(1h) > 65 without price progress (time stop)"
        ]
      },
      "short": {
        "all_of": [
          "close(signal_tf) <= EMA(close(signal_tf), 100)",
          "MACD(signal_tf,12,26,9).line < MACD(signal_tf,12,26,9).signal OR RSI(signal_tf,14) >= 65"
        ],
        "confirmation": [
          "close(trigger_tf) < prev_support(trigger_tf)",
          "volume(trigger_tf) >= 1.5 * SMA(volume(trigger_tf), 20)"
        ],
        "entry": "Market/limit at trigger_tf close when confirmation holds.",
        "risk": {
          "stop": "Above last swing-high on 15m (or 1.2 * ATR(trigger_tf,14) above entry).",
          "tp": "At 1.5–2.0R or next 1h support; trail if MACD turns up on 1h."
        },
        "invalidations": [
          "close(signal_tf) > EMA100_1h",
          "MACD crosses up on 1h after entry",
          "RSI(1h) < 35 without price progress (time stop)"
        ]
      }
    },
    {
      "bucket": "Aggressive",
      "timeframes": { "signal_tf": "5m", "trigger_tf": "1m" },
      "long": {
        "any_of": [
          "RSI(signal_tf,14) <= 20",
          "BBreak(signal_tf,20,2) == 'lower_close_outside' FOLLOWED_BY 'bullish_close_inside'",
          "MACD(signal_tf,12,26,9).hist crosses above 0"
        ],
        "confirmation": [
          "volume(trigger_tf) >= 2.0 * SMA(volume(trigger_tf), 20)"
        ],
        "entry": "Enter on next 1m close after signal + volume confirmation.",
        "risk": {
          "stop": "Just below signal wick low or 1.0 * ATR(trigger_tf,14) below entry (tighter than Balanced).",
          "tp": "Scale out at 1.0R, 1.5R; move stop to BE at 1.0R; hard max hold = 1 day."
        },
        "invalidations": [
          "MACD(signal_tf).hist flips back below 0",
          "RSI(signal_tf) > 50 within N=10 bars without price progress"
        ]
      },
      "short": {
        "any_of": [
          "RSI(signal_tf,14) >= 80",
          "BBreak(signal_tf,20,2) == 'upper_close_outside' FOLLOWED_BY 'bearish_close_inside'",
          "MACD(signal_tf,12,26,9).hist crosses below 0"
        ],
        "confirmation": [
          "volume(trigger_tf) >= 2.0 * SMA(volume(trigger_tf), 20)"
        ],
        "entry": "Enter on next 1m close after signal + volume confirmation.",
        "risk": {
          "stop": "Just above signal wick high or 1.0 * ATR(trigger_tf,14) above entry.",
          "tp": "Scale out at 1.0R, 1.5R; move stop to BE at 1.0R; hard max hold = 1 day."
        },
        "invalidations": [
          "MACD(signal_tf).hist flips back above 0",
          "RSI(signal_tf) < 50 within N=10 bars without price progress"
        ]
      }
    }
  ],
  "helpers": {
    "prev_resistance": "Most recent swing-high or a pivot high on trigger_tf; allow breakout close > pivot high.",
    "prev_support": "Most recent swing-low or a pivot low on trigger_tf; allow breakdown close < pivot low.",
    "BBreak": "Bollinger Band state on timeframe with params (length=20, stdev=2).",
    "EMA100_1h": "EMA(close(1h),100)",
    "EMA200_1d": "EMA(close(1d),200)"
  },
  "defaults": {
    "risk_per_trade_pct": 1.0,
    "min_rr": 1.5,
    "volume_lookback": 20,
    "time_stop_hours": 24
  }
}